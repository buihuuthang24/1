<!-- ...existing code... -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M√¥ ph·ªèng Giao th·ª©c UART - T∆∞∆°ng t√°c</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 40px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 25px;
            backdrop-filter: blur(20px);
            border: 2px solid rgba(0, 255, 255, 0.3);
            position: relative;
            overflow: hidden;
            color: white;
        }
        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(0, 255, 255, 0.1), transparent);
            animation: headerGlow 4s linear infinite;
        }
        @keyframes headerGlow {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        /* X√≥a d·∫•u ngo·∫∑c ƒë√≥ng th·ª´a g√¢y l·ªói c√∫ ph√°p CSS */
        }

        .header h1 {
            font-size: 3.5rem;
            margin-bottom: 15px;
            text-shadow: 0 0 20px rgba(0, 255, 255, 0.5);
            background: linear-gradient(45deg, #00ffff, #ff00ff, #ffff00, #00ffff);
            background-size: 300% 300%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: gradientShift 3s ease-in-out infinite;
            position: relative;
            z-index: 1;
        }
        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        .header p {
            color: #e0e0e0;
            font-size: 1.2rem;
            margin-top: 10px;
            position: relative;
            z-index: 1;
        }

        .simulation-area {
            background: rgba(255,255,255,0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
            animation: fadeInUp 1s ease-out;
        }

        .uart-visual {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin: 40px 0;
            padding: 20px;
            background: linear-gradient(90deg, #f8f9fa, #e9ecef);
            border-radius: 15px;
            border: 2px solid #007bff;

        }
        .device {
            padding: 20px;
            background: linear-gradient(145deg, #667eea, #764ba2);
            color: white;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
            transform: scale(1);
            transition: transform 0.3s ease;

        }
        .device:hover {
            transform: scale(1.05);

        }
        .device h3 {
            font-size: 1.2em;
            margin-bottom: 10px;

        }
        .wire-container {
            flex: 1;
            margin: 0 20px;
            position: relative;

        }
        .wire {
            height: 4px;
            background: #28a745;
            border-radius: 2px;
            position: relative;
            margin: 20px 0;
            overflow: hidden;

        }
        .wire::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, #ffc107, transparent);
            animation: signal-flow 2s linear infinite;

        }
        .wire-active::before {
            animation: signal-flow 0.5s linear infinite;

        }
        .wire-label {
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.9em;
            font-weight: bold;
            color: #333;

        }
        .data-display {
            background: #1a1a1a;
            color: #00ff00;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            margin: 20px 0;
            min-height: 120px;
            overflow-y: auto;
            border: 2px solid #00ff00;

        }
        .bit-visualization {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border: 2px solid #007bff;

        }
        .bit {
            width: 40px;
            height: 40px;
            margin: 0 2px;
            background: #dc3545;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 0.9em;
            transition: all 0.3s ease;
            border: 3px solid #333;

        }
        .bit.high {
            background: #28a745;
            transform: scale(1.1);
            box-shadow: 0 0 15px rgba(40,167,69,0.6);

        }
        .bit.transmitting {
            animation: pulse 0.5s ease-in-out infinite alternate;

        }
        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;

        }
        .control-group {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #dee2e6;

        }
        .control-group label {
            display: block;
            font-weight: bold;
            margin-bottom: 10px;
            color: #495057;

        }
        .control-group input, .control-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ced4da;
            border-radius: 5px;
            font-size: 1em;

        }
        .control-group input:focus, .control-group select:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 0.2rem rgba(0,123,255,0.25);

        }
        .buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 30px 0;

        }
        .btn {
            padding: 12px 30px;
            font-size: 1em;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;

        }
        .btn-primary {
            background: linear-gradient(45deg, #007bff, #0056b3);
            color: white;

        }
        .btn-primary:hover {
            background: linear-gradient(45deg, #0056b3, #003d82);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,123,255,0.4);

        }
        .btn-success {
            background: linear-gradient(45deg, #28a745, #1e7e34);
            color: white;

        }
        .btn-success:hover {
            background: linear-gradient(45deg, #1e7e34, #155724);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(40,167,69,0.4);

        }
        .btn-warning {
            background: linear-gradient(45deg, #ffc107, #e0a800);
            color: #333;

        }
        .btn-warning:hover {
            background: linear-gradient(45deg, #e0a800, #d39e00);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255,193,7,0.4);

        }
        .info-panel {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #2196f3;
            margin: 20px 0;

        }
        .info-panel h3 {
            color: #1976d2;
            margin-bottom: 10px;

        }
        .status-bar {
            display: flex;
            justify-content: space-around;
            background: #343a40;
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;

        }
        .status-item {
            text-align: center;

        }
        .status-item .label {
            font-size: 0.9em;
            opacity: 0.7;

        }
        .status-item .value {
            font-size: 1.2em;
            font-weight: bold;
            margin-top: 5px;

        }
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }

        }
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }

        }
        @keyframes signal-flow {
            0% {
                left: -100%;
            }
            100% {
                left: 100%;
            }

        }
        @keyframes pulse {
            0% {
                transform: scale(1.1);
                box-shadow: 0 0 15px rgba(40,167,69,0.6);
            }
            100% {
                transform: scale(1.3);
                box-shadow: 0 0 25px rgba(40,167,69,0.9);
            }

        }
        .wave-animation {
            width: 100%;
            height: 60px;
            background: #1a1a1a;
            border-radius: 5px;
            position: relative;
            overflow: hidden;
            margin: 10px 0;

        }
        .wave-line {
            position: absolute;
            top: 30px;
            left: 0;
            height: 2px;
            background: #00ff00;
            width: 100%;

        }
        .wave-signal {
            position: absolute;
            top: 0;
            width: 20px;
            height: 100%;
            background: linear-gradient(180deg, transparent 20%, #00ff00 30%, #00ff00 70%, transparent 80%);
            animation: wave-move 1s linear infinite;

        }
        @keyframes wave-move {
            0% {
                left: -20px;
            }
            100% {
                left: 100%;
            }

        }
        /* Theory and Exercise Styles */
        .theory-section, .exercise-section {
            margin: 40px 0;
            background: rgba(255,255,255,0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);

        }
        .theory-tabs, .exercise-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #e9ecef;

        }
        .tab-btn {
            padding: 10px 20px;
            background: #f8f9fa;
            border: none;
            border-radius: 10px 10px 0 0;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;

        }
        .tab-btn.active {
            background: #007bff;
            color: white;

        }
        .tab-btn:hover {
            background: #0056b3;
            color: white;

        }
        .theory-content, .exercise-content {
            display: none;
            animation: fadeInUp 0.5s ease-out;

        }
        .theory-content.active, .exercise-content.active {
            display: block;

        }
        .frame-structure {
            display: flex;
            gap: 2px;
            margin: 20px 0;
            justify-content: center;

        }
        .frame-bit {
            width: 60px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            font-size: 0.8em;
            border-radius: 5px;

        }
        .frame-bit.start {
            background: #dc3545;

        }
        .frame-bit.data {
            background: #007bff;

        }
        .frame-bit.parity {
            background: #ffc107;
            color: #333;

        }
        .frame-bit.stop {
            background: #28a745;

        }
        .exercise-interactive {
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border: 2px solid #dee2e6;

        }
        .exercise-interactive textarea {
            width: 100%;
            height: 80px;
            padding: 10px;
            border: 2px solid #ced4da;
            border-radius: 5px;
            font-family: monospace;
            margin: 10px 0;

        }
        .exercise-interactive input {
            width: 100%;
            padding: 10px;
            border: 2px solid #ced4da;
            border-radius: 5px;
            margin: 10px 0;

        }
        .calculation-helper {
            background: #e3f2fd;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;

        }
        .calc-step {
            margin: 10px 0;
            padding: 10px;
            background: white;
            border-radius: 5px;
            border-left: 4px solid #2196f3;

        }
        .task-list {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;

        }
        .task-item {
            margin: 10px 0;
            padding: 10px;
            background: white;
            border-radius: 5px;
            display: flex;
            align-items: center;
            gap: 10px;

        }
        .task-item input[type="checkbox"] {
            width: 20px;
            height: 20px;

        }
        .quiz-question {
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #28a745;

        }
        .quiz-options {
            margin: 10px 0;

        }
        .quiz-options label {
            display: block;
            margin: 5px 0;
            padding: 5px;
            cursor: pointer;

        }
        .quiz-options input[type="radio"] {
            margin-right: 10px;

        }
        .result-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;

        }
        .result-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üîå M√¥ ph·ªèng Giao th·ª©c UART</h1>
            <p>Hi·ªÉu r√µ c√°ch th·ª©c ho·∫°t ƒë·ªông c·ªßa Universal Asynchronous Receiver Transmitter</p>
        </div>

        <div class="simulation-area">
            <div class="uart-visual">
                <div class="device">
                    <h3>üì± Thi·∫øt b·ªã A</h3>
                    <p>Transmitter</p>
                </div>
                
                <div class="wire-container">
                    <div class="wire" id="txWire">
                        <div class="wire-label">TX ‚Üí RX</div>
                    </div>
                    <div class="wire" id="rxWire">
                        <div class="wire-label">RX ‚Üê TX</div>
                    </div>
                </div>
                
                <div class="device">
                    <h3>üíª Thi·∫øt b·ªã B</h3>
                    <p>Receiver</p>
                </div>
            </div>

            <div class="status-bar">
                <div class="status-item">
                    <div class="label">Tr·∫°ng th√°i</div>
                    <div class="value" id="statusValue">S·∫µn s√†ng</div>
                </div>
                <div class="status-item">
                    <div class="label">Baud Rate</div>
                    <div class="value" id="baudValue">9600</div>
                </div>
                <div class="status-item">
                    <div class="label">D·ªØ li·ªáu g·ª≠i</div>
                    <div class="value" id="sentData">0</div>
                </div>
                <div class="status-item">
                    <div class="label">Th·ªùi gian bit</div>
                    <div class="value" id="bitTime">104 Œºs</div>
                </div>
            </div>

            <div class="controls">
                <div class="control-group">
                    <label for="dataInput">D·ªØ li·ªáu g·ª≠i:</label>
                    <input type="text" id="dataInput" placeholder="Nh·∫≠p d·ªØ li·ªáu..." maxlength="20" value="Hello">
                </div>
                
                <div class="control-group">
                    <label for="baudRate">Baud Rate:</label>
                    <select id="baudRate">
                        <option value="9600">9600</option>
                        <option value="19200">19200</option>
                        <option value="38400">38400</option>
                        <option value="57600">57600</option>
                        <option value="115200">115200</option>
                    </select>
                </div>
                
                <div class="control-group">
                    <label for="dataBits">Data Bits:</label>
                    <select id="dataBits">
                        <option value="7">7 bits</option>
                        <option value="8" selected>8 bits</option>
                    </select>
                </div>
                
                <div class="control-group">
                    <label for="parity">Parity:</label>
                    <select id="parity">
                        <option value="none" selected>None</option>
                        <option value="even">Even</option>
                        <option value="odd">Odd</option>
                    </select>
                </div>
                
                <div class="control-group">
                    <label for="stopBits">Stop Bits:</label>
                    <select id="stopBits">
                        <option value="1" selected>1</option>
                        <option value="2">2</option>
                    </select>
                </div>
                
                <div class="control-group">
                    <label for="speed">T·ªëc ƒë·ªô m√¥ ph·ªèng:</label>
                    <select id="speed">
                        <option value="0.5">R·∫•t ch·∫≠m</option>
                        <option value="1" selected>Ch·∫≠m</option>
                        <option value="2">B√¨nh th∆∞·ªùng</option>
                        <option value="4">Nhanh</option>
                    </select>
                </div>
            </div>

            <div class="buttons">
                <button class="btn btn-primary" onclick="startTransmission()">üöÄ B·∫Øt ƒë·∫ßu truy·ªÅn</button>
                <button class="btn btn-warning" onclick="pauseTransmission()">‚è∏Ô∏è T·∫°m d·ª´ng</button>
                <button class="btn btn-success" onclick="resetSimulation()">üîÑ ƒê·∫∑t l·∫°i</button>
            </div>

            <div class="info-panel">
                <h3>üìä Tr·ª±c quan ho√° Bit</h3>
                <div class="bit-visualization" id="bitVisualization">
                    <!-- Bits s·∫Ω ƒë∆∞·ª£c t·∫°o ƒë·ªông -->
                </div>
            </div>

            <div class="info-panel">
                <h3>üìà D·∫°ng s√≥ng t√≠n hi·ªáu</h3>
                <div class="wave-animation" id="waveAnimation">
                    <div class="wave-line"></div>
                    <div class="wave-signal" id="waveSignal"></div>
                </div>
            </div>

            <div class="data-display" id="dataDisplay">
                <div style="color: #00ff00; font-weight: bold;">‚ïê‚ïê‚ïê UART Monitor ‚ïê‚ïê‚ïê</div>
                <div>S·∫µn s√†ng truy·ªÅn d·ªØ li·ªáu...</div>
            </div>

            <!-- Theory Section -->
            <div class="theory-section">
                <h2 style="text-align: center; color: #007bff; margin: 30px 0;">üìö L√Ω thuy·∫øt UART</h2>
                
                <div class="theory-tabs">
                    <button class="tab-btn active" data-tab="basics">C∆° b·∫£n</button>
                    <button class="tab-btn" data-tab="structure">C·∫•u tr√∫c Frame</button>
                    <button class="tab-btn" data-tab="parameters">Th√¥ng s·ªë</button>
                    <button class="tab-btn" data-tab="applications">·ª®ng d·ª•ng</button>
                </div>

                <div id="theory-basics" class="theory-content active">
                    <div class="info-panel">
                        <h3>üîç UART l√† g√¨?</h3>
                        <p><strong>UART (Universal Asynchronous Receiver Transmitter)</strong> l√† giao th·ª©c truy·ªÅn th√¥ng n·ªëi ti·∫øp kh√¥ng ƒë·ªìng b·ªô ƒë∆∞·ª£c s·ª≠ d·ª•ng r·ªông r√£i trong c√°c h·ªá th·ªëng nh√∫ng.</p>
                        
                        <h4>ƒê·∫∑c ƒëi·ªÉm ch√≠nh:</h4>
                        <ul>
                            <li>üîÑ <strong>Kh√¥ng ƒë·ªìng b·ªô:</strong> Kh√¥ng c·∫ßn t√≠n hi·ªáu clock chung</li>
                            <li>üì° <strong>N·ªëi ti·∫øp:</strong> Truy·ªÅn t·ª´ng bit m·ªôt theo th·ªùi gian</li>
                            <li>üîó <strong>ƒê∆°n gi·∫£n:</strong> Ch·ªâ c·∫ßn 2 d√¢y TX (truy·ªÅn) v√† RX (nh·∫≠n)</li>
                            <li>‚ö° <strong>Linh ho·∫°t:</strong> Nhi·ªÅu t·ªëc ƒë·ªô baud v√† c·∫•u h√¨nh kh√°c nhau</li>
                        </ul>
                    </div>
                </div>

                <div id="theory-structure" class="theory-content">
                    <div class="info-panel">
                        <h3>üèóÔ∏è C·∫•u tr√∫c Frame UART</h3>
                        <div class="frame-structure">
                            <div class="frame-bit start">START</div>
                            <div class="frame-bit data">D0</div>
                            <div class="frame-bit data">D1</div>
                            <div class="frame-bit data">D2</div>
                            <div class="frame-bit data">D3</div>
                            <div class="frame-bit data">D4</div>
                            <div class="frame-bit data">D5</div>
                            <div class="frame-bit data">D6</div>
                            <div class="frame-bit data">D7</div>
                            <div class="frame-bit parity">P</div>
                            <div class="frame-bit stop">STOP</div>
                        </div>
                        
                        <h4>Chi ti·∫øt t·ª´ng ph·∫ßn:</h4>
                        <ul>
                            <li>üü¢ <strong>Start Bit:</strong> Lu√¥n l√† 0, b√°o hi·ªáu b·∫Øt ƒë·∫ßu frame</li>
                            <li>üîµ <strong>Data Bits:</strong> 5-8 bits d·ªØ li·ªáu (th∆∞·ªùng l√† 8), LSB tr∆∞·ªõc</li>
                            <li>üü° <strong>Parity Bit:</strong> Ki·ªÉm tra l·ªói (t√πy ch·ªçn)</li>
                            <li>üî¥ <strong>Stop Bit(s):</strong> 1-2 bits, lu√¥n l√† 1, b√°o hi·ªáu k·∫øt th√∫c</li>
                        </ul>
                    </div>
                </div>

                <div id="theory-parameters" class="theory-content">
                    <div class="info-panel">
                        <h3>‚öôÔ∏è Th√¥ng s·ªë c·∫•u h√¨nh</h3>
                        
                        <h4>üìä Baud Rate (t·ªëc ƒë·ªô baud):</h4>
                        <p>S·ªë bit ƒë∆∞·ª£c truy·ªÅn trong 1 gi√¢y. Th√¥ng d·ª•ng: 9600, 19200, 38400, 57600, 115200 bps</p>
                        
                        <h4>üî¢ Data Bits:</h4>
                        <p>S·ªë bit d·ªØ li·ªáu trong m·ªói frame (5-8 bits). Th∆∞·ªùng d√πng 8 bits ƒë·ªÉ truy·ªÅn k√Ω t·ª± ASCII.</p>
                        
                        <h4>üõ°Ô∏è Parity Bit:</h4>
                        <ul>
                            <li><strong>None:</strong> Kh√¥ng c√≥ bit ki·ªÉm tra</li>
                            <li><strong>Even:</strong> T·ªïng s·ªë bit 1 ph·∫£i ch·∫µn</li>
                            <li><strong>Odd:</strong> T·ªïng s·ªë bit 1 ph·∫£i l·∫ª</li>
                        </ul>
                        
                        <h4>üõë Stop Bits:</h4>
                        <p>1 ho·∫∑c 2 bits ƒë·ªÉ ƒë·∫£m b·∫£o kho·∫£ng c√°ch gi·ªØa c√°c frame.</p>
                    </div>
                </div>

                <div id="theory-applications" class="theory-content">
                    <div class="info-panel">
                        <h3>üåü ·ª®ng d·ª•ng th·ª±c t·∫ø</h3>
                        
                        <h4>üíª L·∫≠p tr√¨nh & Debug:</h4>
                        <ul>
                            <li>Serial Monitor trong Arduino IDE</li>
                            <li>Debug console trong vi ƒëi·ªÅu khi·ªÉn</li>
                            <li>Giao ti·∫øp PC v·ªõi board m·∫°ch</li>
                        </ul>
                        
                        <h4>üîß Thi·∫øt b·ªã IoT:</h4>
                        <ul>
                            <li>C·∫£m bi·∫øn nhi·ªát ƒë·ªô, ƒë·ªô ·∫©m</li>
                            <li>Module GPS, GSM</li>
                            <li>M√†n h√¨nh LCD, OLED</li>
                        </ul>
                        
                        <h4>üè≠ C√¥ng nghi·ªáp:</h4>
                        <ul>
                            <li>PLC v√† HMI</li>
                            <li>H·ªá th·ªëng ƒëo l∆∞·ªùng</li>
                            <li>Thi·∫øt b·ªã t·ª± ƒë·ªông h√≥a</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Exercise Section -->
            <div class="exercise-section">
                <h2 style="text-align: center; color: #28a745; margin: 30px 0;">üéØ B√†i t·∫≠p th·ª±c h√†nh</h2>
                
                <div class="exercise-tabs">
                    <button class="tab-btn active" data-tab="basic">C∆° b·∫£n</button>
                    <button class="tab-btn" data-tab="calculation">T√≠nh to√°n</button>
                    <button class="tab-btn" data-tab="practical">Th·ª±c h√†nh</button>
                    <button class="tab-btn" data-tab="quiz">Tr·∫Øc nghi·ªám</button>
                </div>

                <div id="exercise-basic" class="exercise-content active">
                    <div class="info-panel">
                        <h3>üìù B√†i t·∫≠p 1: Ph√¢n t√≠ch Frame</h3>
                        <p><strong>ƒê·ªÅ b√†i:</strong> Ph√¢n t√≠ch frame UART sau: <code>0 11000001 0 1</code></p>
                        
                        <div class="exercise-interactive">
                            <label>Nh·∫≠p ph√¢n t√≠ch c·ªßa b·∫°n:</label>
                            <textarea id="exercise1-answer" placeholder="V√≠ d·ª•: Start bit = 0, Data = 11000001 (0x83), Parity = 0, Stop = 1"></textarea>
                            <button class="btn btn-primary" onclick="checkExercise1()">Ki·ªÉm tra</button>
                            <div id="exercise1-result"></div>
                        </div>
                    </div>

                    <div class="info-panel">
                        <h3>üìù B√†i t·∫≠p 2: T·∫°o Frame</h3>
                        <p><strong>ƒê·ªÅ b√†i:</strong> T·∫°o frame UART ƒë·ªÉ truy·ªÅn k√Ω t·ª± 'A' (ASCII 65) v·ªõi c·∫•u h√¨nh: 8 data bits, even parity, 1 stop bit</p>
                        
                        <div class="exercise-interactive">
                            <label>Nh·∫≠p frame c·ªßa b·∫°n:</label>
                            <input type="text" id="exercise2-answer" placeholder="V√≠ d·ª•: 0 10000010 1 1">
                            <button class="btn btn-primary" onclick="checkExercise2()">Ki·ªÉm tra</button>
                            <div id="exercise2-result"></div>
                        </div>
                    </div>
                </div>

                <div id="exercise-calculation" class="exercise-content">
                    <div class="info-panel">
                        <h3>üßÆ B√†i t·∫≠p 3: T√≠nh to√°n th·ªùi gian</h3>
                        <p><strong>ƒê·ªÅ b√†i:</strong> T√≠nh th·ªùi gian truy·ªÅn 1 frame UART v·ªõi baud rate 9600 bps, 8 data bits, 1 parity bit, 1 stop bit</p>
                        
                        <div class="calculation-helper">
                            <div class="calc-step">
                                <strong>B∆∞·ªõc 1:</strong> T√≠nh t·ªïng s·ªë bit = 1 (start) + 8 (data) + 1 (parity) + 1 (stop) = 11 bits
                            </div>
                            <div class="calc-step">
                                <strong>B∆∞·ªõc 2:</strong> Th·ªùi gian 1 bit = 1/9600 = 104.17 Œºs
                            </div>
                            <div class="calc-step">
                                <strong>B∆∞·ªõc 3:</strong> Th·ªùi gian 1 frame = 11 √ó 104.17 = 1145.87 Œºs
                            </div>
                        </div>
                        
                        <div class="exercise-interactive">
                            <label>T√≠nh th·ªùi gian truy·ªÅn cho c·∫•u h√¨nh sau:</label>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin: 10px 0;">
                                <div>
                                    <label>Baud Rate:</label>
                                    <input type="number" id="calc-baud" value="19200">
                                </div>
                                <div>
                                    <label>Data Bits:</label>
                                    <input type="number" id="calc-data" value="8">
                                </div>
                                <div>
                                    <label>Parity (0/1):</label>
                                    <input type="number" id="calc-parity" value="0">
                                </div>
                                <div>
                                    <label>Stop Bits:</label>
                                    <input type="number" id="calc-stop" value="1">
                                </div>
                            </div>
                            <button class="btn btn-primary" onclick="calculateFrameTime()">T√≠nh to√°n</button>
                            <div id="calc-result"></div>
                        </div>
                    </div>
                </div>

                <div id="exercise-practical" class="exercise-content">
                    <div class="info-panel">
                        <h3>üî¨ B√†i t·∫≠p 4: Th·ª±c h√†nh m√¥ ph·ªèng</h3>
                        <p><strong>Nhi·ªám v·ª•:</strong> S·ª≠ d·ª•ng m√¥ ph·ªèng tr√™n ƒë·ªÉ ho√†n th√†nh c√°c task sau:</p>
                        
                        <div class="task-list">
                            <div class="task-item">
                                <input type="checkbox" id="task1"> 
                                <label for="task1">Truy·ªÅn chu·ªói "Hello World" v·ªõi baudrate 9600</label>
                            </div>
                            <div class="task-item">
                                <input type="checkbox" id="task2"> 
                                <label for="task2">Thay ƒë·ªïi baudrate th√†nh 115200 v√† quan s√°t s·ª± kh√°c bi·ªát</label>
                            </div>
                            <div class="task-item">
                                <input type="checkbox" id="task3"> 
                                <label for="task3">B·∫≠t even parity v√† truy·ªÅn k√Ω t·ª± 'A'</label>
                            </div>
                            <div class="task-item">
                                <input type="checkbox" id="task4"> 
                                <label for="task4">S·ª≠ d·ª•ng 7 data bits v√† 2 stop bits</label>
                            </div>
                            <div class="task-item">
                                <input type="checkbox" id="task5"> 
                                <label for="task5">Quan s√°t d·∫°ng s√≥ng v√† bit visualization</label>
                            </div>
                        </div>
                        
                        <button class="btn btn-success" onclick="checkTasks()">Ki·ªÉm tra ho√†n th√†nh</button>
                        <div id="task-result"></div>
                    </div>
                </div>

                <div id="exercise-quiz" class="exercise-content">
                    <div class="info-panel">
                        <h3>‚ùì Tr·∫Øc nghi·ªám</h3>
                        
                        <div class="quiz-question">
                            <p><strong>C√¢u 1:</strong> Start bit trong UART lu√¥n c√≥ gi√° tr·ªã:</p>
                            <div class="quiz-options">
                                <label><input type="radio" name="q1" value="0"> 0</label>
                                <label><input type="radio" name="q1" value="1"> 1</label>
                                <label><input type="radio" name="q1" value="random"> Ng·∫´u nhi√™n</label>
                            </div>
                        </div>

                        <div class="quiz-question">
                            <p><strong>C√¢u 2:</strong> V·ªõi baudrate 9600, th·ªùi gian truy·ªÅn 1 bit l√†:</p>
                            <div class="quiz-options">
                                <label><input type="radio" name="q2" value="104"> 104 Œºs</label>
                                <label><input type="radio" name="q2" value="52"> 52 Œºs</label>
                                <label><input type="radio" name="q2" value="208"> 208 Œºs</label>
                            </div>
                        </div>

                        <div class="quiz-question">
                            <p><strong>C√¢u 3:</strong> UART truy·ªÅn data bits theo th·ª© t·ª±:</p>
                            <div class="quiz-options">
                                <label><input type="radio" name="q3" value="lsb"> LSB tr∆∞·ªõc (bit 0 ƒë·∫ßu ti√™n)</label>
                                <label><input type="radio" name="q3" value="msb"> MSB tr∆∞·ªõc (bit 7 ƒë·∫ßu ti√™n)</label>
                                <label><input type="radio" name="q3" value="random"> Th·ª© t·ª± ng·∫´u nhi√™n</label>
                            </div>
                        </div>

                        <button class="btn btn-primary" onclick="checkQuiz()">N·ªôp b√†i</button>
                        <div id="quiz-result"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let isTransmitting = false;
        let isPaused = false;
        let currentBitIndex = 0;
        let currentFrame = [];
        let transmissionSpeed = 1;
        let animationId;

        function updateStatus() {
            const baudRate = document.getElementById('baudRate').value;
            const bitTime = Math.round(1000000 / parseInt(baudRate));
            
            document.getElementById('baudValue').textContent = baudRate;
            document.getElementById('bitTime').textContent = `${bitTime} Œºs`;
            
            transmissionSpeed = parseFloat(document.getElementById('speed').value);
        }

        function createBitFrame(char) {
            const dataBits = parseInt(document.getElementById('dataBits').value);
            const parity = document.getElementById('parity').value;
            const stopBits = parseInt(document.getElementById('stopBits').value);
            
            let frame = [];
            
            // Start bit (lu√¥n l√† 0)
            frame.push({value: 0, type: 'start', label: 'START'});
            
            // Data bits (LSB first)
            const charCode = char.charCodeAt(0);
            for (let i = 0; i < dataBits; i++) {
                const bit = (charCode >> i) & 1;
                frame.push({value: bit, type: 'data', label: `D${i}`});
            }
            
            // Parity bit
            if (parity !== 'none') {
                const dataOnes = frame.filter(b => b.type === 'data' && b.value === 1).length;
                let parityBit = 0;
                if (parity === 'even') {
                    parityBit = dataOnes % 2;
                } else {
                    parityBit = (dataOnes + 1) % 2;
                }
                frame.push({value: parityBit, type: 'parity', label: 'P'});
            }
            
            // Stop bits (lu√¥n l√† 1)
            for (let i = 0; i < stopBits; i++) {
                frame.push({value: 1, type: 'stop', label: 'STOP'});
            }
            
            return frame;
        }

        function createBitVisualization(frame) {
            const container = document.getElementById('bitVisualization');
            container.innerHTML = '';
            
            frame.forEach((bit, index) => {
                const bitElement = document.createElement('div');
                bitElement.className = `bit ${bit.value ? 'high' : 'low'}`;
                bitElement.textContent = bit.value;
                bitElement.title = `${bit.label}: ${bit.value}`;
                bitElement.id = `bit-${index}`;
                container.appendChild(bitElement);
            });
        }

        function animateBitTransmission(bitIndex) {
            // Reset t·∫•t c·∫£ bits
            document.querySelectorAll('.bit').forEach(bit => {
                bit.classList.remove('transmitting');
            });
            
            // Highlight bit hi·ªán t·∫°i
            const currentBit = document.getElementById(`bit-${bitIndex}`);
            if (currentBit) {
                currentBit.classList.add('transmitting');
            }
            
            // Animate wire
            const wire = document.getElementById('txWire');
            wire.classList.add('wire-active');
            
            // Animate wave
            const waveSignal = document.getElementById('waveSignal');
            waveSignal.style.animationDuration = `${1000 / transmissionSpeed}ms`;
        }

        function logToDisplay(message, type = 'info') {
            const display = document.getElementById('dataDisplay');
            const timestamp = new Date().toLocaleTimeString();
            const colors = {
                info: '#00ff00',
                warning: '#ffff00',
                error: '#ff0000',
                success: '#00ffff'
            };
            
            const logEntry = document.createElement('div');
            logEntry.style.color = colors[type] || '#00ff00';
            logEntry.innerHTML = `[${timestamp}] ${message}`;
            display.appendChild(logEntry);
            display.scrollTop = display.scrollHeight;
        }

        async function startTransmission() {
            if (isTransmitting && !isPaused) return;
            
            if (isPaused) {
                isPaused = false;
                document.getElementById('statusValue').textContent = 'ƒêang truy·ªÅn';
                continueTransmission();
                return;
            }
            
            const data = document.getElementById('dataInput').value;
            if (!data) {
                logToDisplay('Vui l√≤ng nh·∫≠p d·ªØ li·ªáu ƒë·ªÉ truy·ªÅn!', 'warning');
                return;
            }
            
            isTransmitting = true;
            isPaused = false;
            document.getElementById('statusValue').textContent = 'ƒêang truy·ªÅn';
            
            logToDisplay(`B·∫Øt ƒë·∫ßu truy·ªÅn: "${data}"`, 'success');
            logToDisplay(`C·∫•u h√¨nh: ${document.getElementById('baudRate').value} baud, ${document.getElementById('dataBits').value} data bits, ${document.getElementById('parity').value} parity, ${document.getElementById('stopBits').value} stop bits`);
            
            for (let i = 0; i < data.length; i++) {
                if (!isTransmitting || isPaused) break;
                
                const char = data[i];
                currentFrame = createBitFrame(char);
                createBitVisualization(currentFrame);
                
                logToDisplay(`Truy·ªÅn k√Ω t·ª±: '${char}' (0x${char.charCodeAt(0).toString(16).padStart(2, '0')})`);
                
                // Truy·ªÅn t·ª´ng bit
                for (let bitIndex = 0; bitIndex < currentFrame.length; bitIndex++) {
                    if (!isTransmitting || isPaused) break;
                    
                    currentBitIndex = bitIndex;
                    animateBitTransmission(bitIndex);
                    
                    const bit = currentFrame[bitIndex];
                    logToDisplay(`  Bit ${bitIndex}: ${bit.value} (${bit.label})`);
                    
                    await new Promise(resolve => {
                        setTimeout(resolve, 1000 / transmissionSpeed);
                    });
                }
                
                await new Promise(resolve => setTimeout(resolve, 200 / transmissionSpeed));
            }
            
            if (isTransmitting && !isPaused) {
                logToDisplay('Truy·ªÅn ho√†n t·∫•t!', 'success');
                document.getElementById('statusValue').textContent = 'Ho√†n t·∫•t';
                document.getElementById('sentData').textContent = data.length;
                
                // Reset animations
                document.querySelectorAll('.bit').forEach(bit => {
                    bit.classList.remove('transmitting');
                });
                document.getElementById('txWire').classList.remove('wire-active');
                
                isTransmitting = false;
            }
        }

        function continueTransmission() {
            // Logic ƒë·ªÉ ti·∫øp t·ª•c truy·ªÅn t·ª´ v·ªã tr√≠ hi·ªán t·∫°i
            startTransmission();
        }

        function pauseTransmission() {
            if (!isTransmitting) return;
            
            isPaused = true;
            document.getElementById('statusValue').textContent = 'T·∫°m d·ª´ng';
            logToDisplay('Truy·ªÅn b·ªã t·∫°m d·ª´ng', 'warning');
        }

        function resetSimulation() {
            isTransmitting = false;
            isPaused = false;
            currentBitIndex = 0;
            currentFrame = [];
            
            document.getElementById('statusValue').textContent = 'S·∫µn s√†ng';
            document.getElementById('sentData').textContent = '0';
            
            // Reset visualizations
            document.getElementById('bitVisualization').innerHTML = '<div style="color: #666; font-style: italic;">Ch·ªù d·ªØ li·ªáu...</div>';
            document.getElementById('txWire').classList.remove('wire-active');
            
            // Clear log
            document.getElementById('dataDisplay').innerHTML = `
                <div style="color: #00ff00; font-weight: bold;">‚ïê‚ïê‚ïê UART Monitor ‚ïê‚ïê‚ïê</div>
                <div>S·∫µn s√†ng truy·ªÅn d·ªØ li·ªáu...</div>
            `;
            
            logToDisplay('ƒê·∫∑t l·∫°i m√¥ ph·ªèng', 'info');
        }

        // Event listeners
        document.getElementById('baudRate').addEventListener('change', updateStatus);
        document.getElementById('speed').addEventListener('change', updateStatus);
        document.getElementById('dataInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                startTransmission();
            }
        });

        // Tab switching logic for theory tabs
        document.querySelectorAll('.theory-tabs .tab-btn').forEach(btn => {
            btn.addEventListener('click', function(e) {
                const tabName = this.getAttribute('data-tab');
                document.querySelectorAll('.theory-content').forEach(content => {
                    content.classList.remove('active');
                });
                document.querySelectorAll('.theory-tabs .tab-btn').forEach(b => b.classList.remove('active'));
                document.getElementById(`theory-${tabName}`).classList.add('active');
                this.classList.add('active');
            });
        });

        // Tab switching logic for exercise tabs
        document.querySelectorAll('.exercise-tabs .tab-btn').forEach(btn => {
            btn.addEventListener('click', function(e) {
                const tabName = this.getAttribute('data-tab');
                document.querySelectorAll('.exercise-content').forEach(content => {
                    content.classList.remove('active');
                });
                document.querySelectorAll('.exercise-tabs .tab-btn').forEach(b => b.classList.remove('active'));
                document.getElementById(`exercise-${tabName}`).classList.add('active');
                this.classList.add('active');
            });
        });

        // Exercise Functions
        function checkExercise1() {
            const answer = document.getElementById('exercise1-answer').value.toLowerCase();
            const result = document.getElementById('exercise1-result');
            
            if (answer.includes('start') && answer.includes('0') && 
                answer.includes('11000001') && answer.includes('parity') && 
                answer.includes('stop')) {
                result.innerHTML = `<div class="result-success">‚úÖ Ch√≠nh x√°c! Frame: Start=0, Data=11000001 (0x83='S'), Parity=0 (even), Stop=1</div>`;
            } else {
                result.innerHTML = `<div class="result-error">‚ùå Ch∆∞a ch√≠nh x√°c. G·ª£i √Ω: Ph√¢n t√≠ch t·ª´ng ph·∫ßn c·ªßa frame t·ª´ tr√°i sang ph·∫£i</div>`;
            }
        }

        function checkExercise2() {
            const answer = document.getElementById('exercise2-answer').value.replace(/\s+/g, '');
            const result = document.getElementById('exercise2-result');
            
            // 'A' = 65 = 01000001 in binary, with even parity = 1
            const correctAnswer = '010000011';
            
            if (answer === correctAnswer) {
                result.innerHTML = `<div class="result-success">‚úÖ Ch√≠nh x√°c! Frame cho 'A': 0 10000010 1 1</div>`;
            } else {
                result.innerHTML = `<div class="result-error">‚ùå Ch∆∞a ƒë√∫ng. G·ª£i √Ω: A=65=01000001, even parity v·ªõi 2 bit 1 ‚Üí parity=0</div>`;
            }
        }

        function calculateFrameTime() {
            const baud = parseInt(document.getElementById('calc-baud').value);
            const dataBits = parseInt(document.getElementById('calc-data').value);
            const parity = parseInt(document.getElementById('calc-parity').value);
            const stopBits = parseInt(document.getElementById('calc-stop').value);
            
            const totalBits = 1 + dataBits + parity + stopBits; // 1 start bit
            const bitTime = 1000000 / baud; // microseconds
            const frameTime = totalBits * bitTime;
            
            const result = document.getElementById('calc-result');
            result.innerHTML = `
                <div class="result-success">
                    <strong>K·∫øt qu·∫£:</strong><br>
                    ‚Ä¢ T·ªïng bits: ${totalBits} bits<br>
                    ‚Ä¢ Th·ªùi gian 1 bit: ${bitTime.toFixed(2)} Œºs<br>
                    ‚Ä¢ Th·ªùi gian 1 frame: ${frameTime.toFixed(2)} Œºs<br>
                    ‚Ä¢ T·ªëc ƒë·ªô truy·ªÅn: ${(1000000/frameTime).toFixed(0)} frames/gi√¢y
                </div>
            `;
        }

        function checkTasks() {
            const tasks = document.querySelectorAll('.task-item input[type="checkbox"]');
            const completed = Array.from(tasks).filter(task => task.checked).length;
            const result = document.getElementById('task-result');
            
            if (completed === tasks.length) {
                result.innerHTML = `<div class="result-success">üéâ Ho√†n th√†nh t·∫•t c·∫£ ${tasks.length} nhi·ªám v·ª•! B·∫°n ƒë√£ n·∫Øm v·ªØng c√°ch s·ª≠ d·ª•ng m√¥ ph·ªèng UART.</div>`;
            } else {
                result.innerHTML = `<div class="result-error">üìù ƒê√£ ho√†n th√†nh ${completed}/${tasks.length} nhi·ªám v·ª•. H√£y th·ª≠ c√°c t√≠nh nƒÉng c√≤n l·∫°i!</div>`;
            }
        }

        function checkQuiz() {
            const answers = {
                q1: '0', // Start bit always 0
                q2: '104', // 1/9600 = 104 Œºs
                q3: 'lsb' // LSB first
            };
            
            let score = 0;
            let total = Object.keys(answers).length;
            
            for (let question in answers) {
                const selected = document.querySelector(`input[name="${question}"]:checked`);
                if (selected && selected.value === answers[question]) {
                    score++;
                }
            }
            
            const result = document.getElementById('quiz-result');
            const percentage = Math.round((score / total) * 100);
            
            if (percentage >= 80) {
                result.innerHTML = `<div class="result-success">üéâ Xu·∫•t s·∫Øc! B·∫°n ƒë·∫°t ${score}/${total} c√¢u ƒë√∫ng (${percentage}%)</div>`;
            } else if (percentage >= 60) {
                result.innerHTML = `<div class="result-success">‚úÖ T·ªët! B·∫°n ƒë·∫°t ${score}/${total} c√¢u ƒë√∫ng (${percentage}%)</div>`;
            } else {
                result.innerHTML = `<div class="result-error">üìö C·∫ßn √¥n t·∫≠p th√™m. B·∫°n ƒë·∫°t ${score}/${total} c√¢u ƒë√∫ng (${percentage}%)</div>`;
            }
        }
    </script>
    <!-- Gemini Chatbot Widget -->
    <script src="chatbot.js"></script>
</body>
</html>